# Домашнее задание по 6 семинару

[Общие сведения](../)

## Задания

- [Задание 3](#задание-3-с-семинара), [скрипт](./task_3.py), [модели](./models_3.py)
- [Задание 4](#задание-4-с-семинара), [скрипт](./task_4.py), [модели](./models_4.py)

### Задание 3 с семинара

- `Создать API для управления списком задач.`
- `Каждая задача должна содержать поля "название",
"описание" и "статус" (выполнена/не выполнена).`
- `API должен позволять выполнять CRUD операции с задачами.`

#### Описание решения

Для этого и последующих заданий, вместо схемы создания приложения и моделей, которые показывались на лекции, я буду использовать ту, которую мы использовали на семинаре.

В моделях используются все поля, указанные в заданий.

В начале я хотел сделать метод, который позволяет менять только статус задачи, поэтому отделил `Status` в свой класс, однако позже я изменил мнение, и создал метод, который выполняет задачу.

Список всех методов:

- [Получение списка всех задач \[GET\]](./task_3.py#L30-L34)
- [Получение списка выполненных задач \[GET\]](./task_3.py#L37-L41)
- [Получение списка невыполненных задач \[GET\]](./task_3.py#L44-L48)
- [Создание новой задачи \[POST\]](./task_3.py#L52-L57)
- [Получение задачи по id \[GET\]](./task_3.py#L60-L64)
- [Изменение задачи по id \[PUT\]](./task_3.py#L67-L74)
- [Удаление задачи по id \[DELETE\]](./task_3.py#L77-L86)
- [Выполнение задачи по id \[POST\]](./task_3.py#L90-L97)

### Задание 4 с семинара

- `Напишите API для управления списком задач. Для этого создайте модель Task со следующими полями:`
    - `id: int (первичный ключ)`
    - `title: str (название задачи)`
    - `description: str (описание задачи)`
    - `done: bool (статус выполнения задачи)`
- `API должно поддерживать следующие операции:`
    - `Получение списка всех задач: GET /tasks/`
    - `Получение информации о конкретной задаче: GET /tasks/{task_id}/`
    - `Создание новой задачи: POST /tasks/`
    - `Обновление информации о задаче: PUT /tasks/{task_id}`
    - `Удаление задачи: DELETE /tasks/{task_id}/`
- `Для валидации данных используйте параметры Field модели Task.`

#### Описание решения

Эта задача буквально копипаст предыдущей. Поэтому вот сразу список всех методов:

- [Получение списка всех задач \[GET\]](./task_3.py#L30-L34)
- [Получение информации о конкретной задаче \[GET\]](./task_3.py#L38-L42)
- [Создание новой задачи \[POST\]](./task_3.py#L45-L50)
- [Обновление информации о задаче \[PUT\]](./task_3.py#L53-L60)
- [Удаление задачи \[DELETE\]](./task_3.py#L63-L72)


### Задание 6 с семинара

- `Необходимо создать базу данных для интернет-магазина. База данных должна
состоять из трех таблиц: товары, заказы и пользователи. Таблица товары должна
содержать информацию о доступных товарах, их описаниях и ценах. Таблица
пользователи должна содержать информацию о зарегистрированных
пользователях магазина. Таблица заказы должна содержать информацию о
заказах, сделанных пользователями.`
    - `Таблица пользователей должна содержать следующие поля: id (PRIMARY KEY),
имя, фамилия, адрес электронной почты и пароль.`
    - `Таблица товаров должна содержать следующие поля: id (PRIMARY KEY),
название, описание и цена.`
    - `Таблица заказов должна содержать следующие поля: id (PRIMARY KEY), id
пользователя (FOREIGN KEY), id товара (FOREIGN KEY), дата заказа и статус
заказа.`

- `Создайте модели pydantic для получения новых данных и
возврата существующих в БД для каждой из трёх таблиц
(итого шесть моделей).`
- `Реализуйте CRUD операции для каждой из таблиц через
создание маршрутов, REST API (итого 15 маршрутов).`
    - `Чтение всех`
    - `Чтение одного`
    - `Запись`
    - `Изменение`
    - `Удаление`


#### Описание решения

Все перечисленные в задании маршруты созданы, помимо них, указал ещё корневой маршрут для показа всех записей в БД.
Для этого задания, конечно, было бы лучше использовать class-based views, но с базовым функционалом FastAPI это сделать проблематично, и через небольшие костыли. Также в заказах, конечно, было бы лучше использовать связь M-2-M с товарами, но, так как по заданию используется связь 1-2-M, решил оставить всё, как есть)

Список всех методов:

- [Получение всех записей из БД](./task_6.py#L41-L69)
- [CRUD-операции для таблицы users](./task_6.py#L72-L110)
- [CRUD-операции для таблицы items](./task_6.py#L113-L152)
- [CRUD-операции для таблицы orders](./task_6.py#L155-L194)
